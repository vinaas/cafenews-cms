<template>
    <style>
      ux-dialog-overlay.active {
        background-color: black;
        opacity: .5;
      }
  
      ux-dialog-container.active .modal.fade.stick-up .modal-dialog {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -ms-transform: translate(0);
      }
  
      .ux-dialog-open {
        overflow: hidden;
      }
  
      .ux-dialog-open .modal {
        overflow-x: hidden;
        overflow-y: auto;
      }
  
      ux-dialog {
        padding: 0!important;
        box-shadow: none !important;
        background: transparent !important;
        border: none !important;
      }
  
      .datepicker.dropdown-menu{
        z-index: 999999!important
      }
  
    </style>
    <ux-dialog>
      <ux-dialog-body>
        <div class="modal fade stick-up" role="dialog" aria-hidden="true" data-backdrop="static" style="display:block">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header clearfix text-left">
                <button click.delegate="ctrl.cancel()" type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="pg-close fs-14"></i> </button>
              </div>
              <div class="modal-body">
                <div class="panel panel-default">
                  <div class="panel-body">
                   <h5>Chi tiết <span class="semi-bold"> bài viết</span></h5>
                    <form role="form" class="desModalForm">
                        <div class="panel panel-default">
                            <div class="panel-body">
                              <h5 class="m-t-0">
                                  Tìm kiếm
                              </h5>
                              <form role="form" lpformnum="2" class="form-filter">
                                <div class="form-group">
                                  <label>Tên bài viết</label>
                                  <span class="help">e.g. </span>
                                  <input type="text" class="form-control input-sm" value.bind="filter.where.tenPhongBan.ilike">
                                </div>
                                <div class="form-group long">
                                  <label>Theo ngày</label>
                                  <span class="help">e.g. </span>
                                  <div class="input-daterange input-group" daterangepickter >
                                    <input type="text" class="input-sm form-control" name="start" value.bind="start" datepicker>
                                    <span class="input-group-addon">to</span>
                                    <input type="text" class="input-sm form-control" name="end" value.bind="end" datepicker>
                                  </div>
                                </div>
                                <div class="form-group">
                                  <button data-loading-text="Loading" btn-async="task.call:runFilterdialog()" class="btn btn-primary btn-cons btn-sm m-t-25" type="submit"><i class="fa fa-search"></i> Tìm kiếm</button>
                                </div>
                              </form>
                            </div>
                          </div>
                          <div class="panel panel-default">
                            <div class="panel-body">
                              <loader async-task.bind="asyncTask">
                                <table class="table table-hover" aurelia-table="data.bind: items; display-data.bind: $displayData; ">
                                  <thead>
                                      <tr>
                                        <th>STT</th>
                                        <th>Tên bài viết</th>
                                        <th>Thuộc lĩnh vực</th>
                                        <th>Ngày đăng</th>
                                        <th>Chi tiết </th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr repeat.for="item of $displayData">
                                        <td>${$index+1}</td>
                                        <td>${item.title}</td>
                                        <td>${item.thuocLinhVuc}</td>
                                        <td>${item.ngayDang}</td>
                                        <td><a href="javascript:void(0);" class="text-primary"><i class="fa fa-user-circle-o"></i> Xem</a></td>
                                      </tr>
                                  </tbody>
                                </table>
                                <div class="row">
                                  <div class="col-md-8">
                                    <aut-pagination filter-ref.bind="filter" changed.delegate="paginationChanged($event)" current-page.bind="currentPage" page-size.bind="pageSize" total-items.bind="itemsCount" pagination-size.bind="5">
                                    </aut-pagination>
                                  </div>
                
                                  <div class="col-md-4">
                                    <div class="form-inline">
                                      <div class="form-group pull-right">
                                        <label for="pageSize">Page Size: </label>
                                        <select value.bind="pageSize" id="pageSize" class="form-control">
                                          <option model.bind="5">5</option>
                                          <option selected model.bind="10">10</option>
                                          <option model.bind="20">20</option>
                                          <option model.bind="50">50</option>
                                        </select>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </loader>
                            </div>
                          </div>                      
                    </form>
                  </div>
                </div>
                <div class="text-right m-t-20">
                    <button click.delegate="ctrl.cancel()" type="button" class="btn btn-danger m-t-5" data-dismiss="modal"><i class="fa fa-close"></i> Đóng</button>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </ux-dialog-body>
    </ux-dialog>
  </template>